<div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-md">
    <div class="mb-6 border-b pb-4">
        <h2 class="text-2xl font-bold text-gray-800">
            {{ isEditMode() ? 'Editar Mascota' : 'Nueva Mascota' }}
        </h2>
        <p class="text-gray-500 text-sm mt-1">
            {{ isEditMode() ? 'Actualiza los datos de tu mascota' : 'Registra una nueva mascota en la plataforma' }}
        </p>
    </div>

    <form [formGroup]="petForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <!-- Name -->
        <div>
            <label for="name" class="block text-sm font-medium text-gray-700">Nombre</label>
            <input type="text" id="name" formControlName="name"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 px-4 py-2 border">
            @if (f['name'].touched && f['name'].errors?.['required']) {
            <p class="text-red-500 text-xs mt-1">El nombre es obligatorio.</p>
            }
        </div>

        <!-- Breed -->
        <div>
            <label for="breed" class="block text-sm font-medium text-gray-700">Raza</label>
            <input type="text" id="breed" formControlName="breed"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 px-4 py-2 border">
            @if (f['breed'].touched && f['breed'].errors?.['required']) {
            <p class="text-red-500 text-xs mt-1">La raza es obligatoria.</p>
            }
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Age -->
            <div>
                <label for="age" class="block text-sm font-medium text-gray-700">Edad (a√±os)</label>
                <input type="number" id="age" formControlName="age"
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 px-4 py-2 border">
                @if (f['age'].touched && f['age'].errors?.['required']) {
                <p class="text-red-500 text-xs mt-1">La edad es obligatoria.</p>
                }
            </div>

            <!-- Status -->
            <div>
                <label for="status" class="block text-sm font-medium text-gray-700">Estado</label>
                <select id="status" formControlName="status"
                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 px-4 py-2 border bg-white">
                    <option value="safe">Seguro (En casa)</option>
                    <option value="alert">Alerta (Fuera de zona)</option>
                    <option value="lost">Perdido</option>
                </select>
            </div>
        </div>

        <!-- Photo URL -->
        <div>
            <label for="photoUrl" class="block text-sm font-medium text-gray-700">URL de la Foto</label>
            <input type="text" id="photoUrl" formControlName="photoUrl" placeholder="https://..."
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary focus:ring-opacity-50 px-4 py-2 border">
            @if (f['photoUrl'].touched && f['photoUrl'].errors?.['required']) {
            <p class="text-red-500 text-xs mt-1">La URL de la foto es obligatoria.</p>
            }
        </div>

        <!-- Preview -->
        @if (petForm.get('photoUrl')?.value) {
        <div class="mt-4">
            <span class="block text-sm font-medium text-gray-700 mb-2">Vista previa:</span>
            <img [src]="petForm.get('photoUrl')?.value" alt="Preview"
                class="h-40 w-40 object-cover rounded-lg border border-gray-200">
        </div>
        }

        <!-- Actions -->
        <div class="flex items-center justify-end gap-3 pt-6 border-t border-gray-100">
            <a routerLink="/pets"
                class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 text-sm font-medium">
                Cancelar
            </a>
            <button type="submit" [disabled]="petForm.invalid || isLoading()"
                class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 disabled:cursor-not-allowed shadow-sm text-sm font-medium flex items-center gap-2">
                @if (isLoading()) {
                <svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                    viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor"
                        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                    </path>
                </svg>
                }
                {{ isEditMode() ? 'Actualizar' : 'Guardar' }}
            </button>
        </div>
    </form>
</div>